(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))r(e);new MutationObserver(e=>{for(const o of e)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function i(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerPolicy&&(o.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?o.credentials="include":e.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(e){if(e.ep)return;e.ep=!0;const o=i(e);fetch(e.href,o)}})();addEventListener("DOMContentLoaded",()=>{const d=new Howl({src:["https://cdn.jsdelivr.net/gh/nrmarston/portfolio-v3-wf@main/public/sounds/unlock.mp3"],volume:.5});gsap.registerPlugin(Draggable,MorphSVGPlugin,SplitText,TextPlugin);const t=document.querySelector("#stu_handle"),i=document.querySelector("#iconPath"),r=document.querySelector("#stu_bg-text"),e=document.querySelector("#stu_track"),o=document.querySelector("#stu_end"),c="#lockedIcon",h="#unlockedIcon",n={primary:"var(--colors--primary)",primaryFg:"var(--colors--primary-foreground)",secondary:"var(--_color---secondary)",secondaryFg:"var(--_color---secondary-foreground)",accent:"var(--_color---accent)",accentFg:"var(--_color---accent-foreground)",foreground:"var(--colors-foreground)",success:"#218358"};gsap.timeline({paused:!0});let s=null,l=null;function g(){s&&s.kill(),gsap.set(l.chars,{opacity:.6}),s=gsap.to(l.chars,{opacity:1,stagger:{each:.15,yoyo:!0,repeat:-1},duration:.75,repeat:-1,ease:"power3.inOut"})}document.fonts.ready.then(()=>{l=new SplitText(r,{type:"chars"}),g()});const u=Draggable.create(t,{type:"x",bounds:e,dragResistance:.2,edgeResistance:1,throwResistance:2500,onDrag:k,onDragStart:b,onDragEnd:v,onPressInit:x})[0];function b(){console.log("Drag started")}function x(){console.log("Handle pressed")}let f=0;function k(){const a=this.x/this.maxX;if(this.x>=f&&this.x>10){const p=gsap.utils.interpolate(1,0,a*2);gsap.set(r,{opacity:p})}Draggable.hitTest(t,o,"15%")?gsap.to(o,{opacity:1,duration:.2,borderColor:n.success,backgroundColor:n.accent}):gsap.to(o,{opacity:0,duration:.2,borderColor:n.accentFg,backgroundColor:"transparent"}),f=this.x}function v(){const p=this.maxX*.85;this.x>=p?y():m()}function y(){s&&s.kill(),gsap.to(o,{opacity:0,borderColor:n.success,duration:.2}),gsap.timeline().to(r,{opacity:0,duration:0}).to(u.target,{x:u.maxX,duration:.15},"+=0.15").to(i,{morphSVG:h,duration:.2}).to(t,{color:n.primaryFg,backgroundColor:n.primary,duration:.15,ease:"power3.out"},"-=0.05").to(r,{text:"Unlocked!",color:n.success,duration:.15,ease:"power3.out"},"+=0.05").to(r,{opacity:1,duration:.15,ease:"power3.out"}),setTimeout(()=>{d.stop(),d.play()},300),console.log("Unlocked!")}function m(){gsap.to(o,{opacity:0,borderColor:n.accentFg,backgroundColor:"transparent",duration:.2}),gsap.timeline().to(r,{opacity:0,duration:0}).to(u.target,{x:0,duration:.3}).to(i,{morphSVG:c,duration:.15}).to(t,{color:n.secondaryFg,backgroundColor:n.secondary,duration:.15}).to(r,{text:"Slide to unlock.",color:n.foreground,duration:.15,ease:"power3.out"}).to(r,{opacity:1,duration:.15,ease:"power3.out",onComplete:()=>{l=new SplitText(r,{type:"chars"}),g()}})}document.addEventListener("keydown",a=>{a.shiftKey&&a.key.toLowerCase()==="l"&&(parseInt(gsap.getProperty(t,"x"))<u.maxX?y():m(),a.preventDefault())}),t.setAttribute("aria-pressed","false"),t.setAttribute("role","button"),t.setAttribute("tabindex","0")});
